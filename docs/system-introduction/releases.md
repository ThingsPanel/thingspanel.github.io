---
sidebar_position: 9
---

# 更新记录
## ThingsPanel-Ver0.4.5
### 新增功能
- 增加了设备配置按钮，增加了设备位置信息的录入功能。
- 新增设备接入实时显示功能，可以设置阈值。
- 新增设备监控菜单，接入即可查看设备监控信息。
- 新增设备脚本支持处理透传协议的消息，支持mqtt协议接入发送字符串，二进制等类型的消息
- 新增上下行脚本函数msg参数类型由string变为[]byte（上个版本使用脚本的用户需要注意）
- 新增mqtt客户端启动重连、掉线重连，配置文件增加QoS配置
- 数据管理列表增加设备名称、数据标签模糊匹配，增加属性别名（设备字段的映射，在设备插件物模型中可定义）。
- 设备脚本表新增device_type字段。
- 设备插件生成器物模型中新增属性单位的录入，单位同时可显示在图表单元中。
- 新增定时控制增加异常校验。
- 新增自定义TCP协议、官方TCP协议插件。
- 新增协议插件自动注册和手动注册接口。
- 新增协议插件根据网关token和子设备地址查询子设备详情的接口。
- 新增了设备地图相关接口，为下个版本的设备地图功能提供支持。
- 新增mqtt客户端启动重连、掉线重连，配置文件增加QoS配置。
- 新增获取系统时间接口。
- 数据管理增加数据别名（物模型字段映射）
- Docker镜像目录映射宿主机，把数据代码分离，方便升级(规则引擎升级-需要查找差分文件，gmqtt升级-用户密码文件需要查找差分文件)。
- 新增系统自带设备插件，包括开关和温湿度。
- 升级go到1.18。

### 优化和修复
- 改进可视化逻辑，支持创建多个可视化。
- 设备管理列表的编辑参数界面优化了连接信息，点击即可复制，方便配置设备。
- Modbus协议插件修复了部分BUG，优化了性能。
- 修复新增设备列表排序的Bug，方便查找。
- 系统操作日志查询改进显示速度。
- 网关类型的设备修改为直连设备类型需要删除子设备，避免误操作。
- 更新协议插件相关模块的逻辑和接口，提高了兼容性。
- 设备列表显示设备插件中图表单元标签，方便大家知道这个设备都有哪些图表可看。
- 优化设备管理在线离线状态(通过mqtt主题device/status接收设备在线离线状态，保存在内存中)
- 样式规范化。
  
## ThingsPanel-Ver0.4.0 
2022-10-20发布
- 设备接入支持子设备。
- 支持 MQTT 网关接入。
- 支持 Modbus 网关接入，支持 Modbus TCP/RTU 协议。
- 支持脚本解析器解析设备端发来的数据。
- 新增设备插件生成器，支持设备插件快速开发，自定义图表，支持导入导出。
- 新增协议插件功能，支持各种协议接入。
- 新增大屏编辑器，支持图表、组态、报表、3D（自行开发插件）。
- 新增支持物模型，并支持自定义。
- 新增设备安全认证。
- 修复角色权限问题。
## ThingsPanel-Ver0.3.0

### 新增功能

- 增加了Redis作为缓存模块
- 增加了RBAC权限管理模块，使用的是Casbin权限框架，权限粒度具体到按钮或者接口
- 增加了角色管理页面
- 增加了权限管理页面
- 后端增加了对Docker环境变量的支持
- 简化了部署，增加了对华为云/阿里云的适配
- 增加了接入规则引擎和数据转发功能
- 重写了业务-设备分组-设备模块，支持设备无限分组
- 增加了操作设备的日志，支持查询手动操作和自动操作记录
### 优化和修复
- 优化了首次登录加载速度
- 优化了整体的UI
- 优化了部分表索引和排序，提高了操作的流畅度
- 提高了压力测试标准，对各方面性能和结构进行了优化
- 优化了自动化的告警和控制策略
- 重写了用户添加功能和页面
- 优化了告警信息页面

## ThingsPanel-Ver0.2.0

###  本次新增功能 ##
- 增加了系统设置主菜单，支持更换系统上所有logo和系统名称
- 增加了设备属性功能，可以填入设备位置，以便在业务可视化中给设备定位
- 优化了tcp协议，增加了设备重置api接口
- 增加了外部扩展接口：根据设备id查询设备历史数据
- 增加了外部扩展接口：提供输入设备数据和图片的接口
- 数据管理中增加了图片预览功能，修复了时间不显示缺陷
- 增加了外部扩展接口：根据业务id查询业务下所有设备和设备当前值
- 增加了外部扩展接口：根据设备id查询设备当前值
- 增加了数据导出到excel功能
- 后台增加了日志模块，可在app.conf配置文件中配置拆分行数，8个日志级别，日志保存时间；sql日志记录在info级别
- 告警信息支持业务id，资产id，设备id检索
- 增加了动态加载logo，更换了加载风格
### 本次优化和修复的缺陷 ##
- 修复了自动化预警“或”关联事件引起服务宕机问题
- 优化了可视化中切换资产出现的无法切换问题，并优化了切换加载速度
- 优化了登录页加载时间长的问题
- 优化了应用管理中图表字段换行会使盒子变高的问题
- 修复了温湿度可视化插件曲线图无法加载的缺陷
- 对所有插件的标题和布局进行了优化
- 优化了前端打包部署部分的配置，与docker一键部署形成了配合
- 优化了docker版本，支持在docker版本上更新前后端代码、前端代码和nginx配置
- 优化了数据管理的检索功能，修复了部分bug，增强了用户体验；
- 优化了业务中的编辑业务，降低了显示延迟；修改了部分名称
