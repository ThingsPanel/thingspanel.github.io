"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1477],{10:e=>{e.exports=JSON.parse('{"blogPosts":[{"id":"script","metadata":{"permalink":"/blog/script","editUrl":"https://github.com/ThingsPanel/thingspanel.github.io/tree/source/blog/2023-01-31-script.md","source":"@site/i18n/en/docusaurus-plugin-content-blog/2023-01-31-script.md","title":"ThingsPanel \u975e\u5b98\u65b9\u6807\u51c6MQTT\u534f\u8bae\u8bbe\u5907\u63a5\u5165","description":"\u95ee\u9898","date":"2023-01-31T00:00:00.000Z","formattedDate":"January 31, 2023","tags":[{"label":"ThingsPanel","permalink":"/blog/tags/things-panel"},{"label":"MQTT","permalink":"/blog/tags/mqtt"}],"readingTime":3.94,"hasTruncateMarker":false,"authors":[{"name":"hezhuo","title":"\u6781\u76ca\u79d1\u6280","url":"https://github.com/hezhuozhuo","image_url":"https://avatars.githubusercontent.com/u/61645647?s=64&v=4","imageURL":"https://avatars.githubusercontent.com/u/61645647?s=64&v=4"}],"frontMatter":{"slug":"script","title":"ThingsPanel \u975e\u5b98\u65b9\u6807\u51c6MQTT\u534f\u8bae\u8bbe\u5907\u63a5\u5165","authors":{"name":"hezhuo","title":"\u6781\u76ca\u79d1\u6280","url":"https://github.com/hezhuozhuo","image_url":"https://avatars.githubusercontent.com/u/61645647?s=64&v=4","imageURL":"https://avatars.githubusercontent.com/u/61645647?s=64&v=4"},"tags":["ThingsPanel","MQTT"]},"unlisted":false,"nextItem":{"title":"ThingsPanel-0.3.0 was released, adding a rule engine, a permission system, and optimizing device access","permalink":"/blog/thingspanel-ver0.3.0-release"}},"content":"## \u95ee\u9898\\n\\n1. mqtt\u8bbe\u5907/\u7f51\u5173`\u53d1\u9001\u548c\u8ba2\u9605\u4e3b\u9898`\u4e0e\u5e73\u53f0\u4e0d\u4e00\u81f4\u5e76\u65e0\u6cd5\u4fee\u6539\uff0c\u600e\u4e48\u63a5\u5165ThingsPanel\u5e73\u53f0?\\n\\n2. mqtt\u8bbe\u5907/\u7f51\u5173`json\u62a5\u6587\u89c4\u8303`\u4e0e\u5e73\u53f0\u89c4\u8303\u4e0d\u4e00\u81f4\uff0c\u600e\u4e48\u63a5\u5165ThingsPanel\u5e73\u53f0?\\n\\n## \u4f7f\u7528\u89c4\u5219\u5f15\u64ce\u8f6c\u53d1\u8bbe\u5907\u6570\u636e\\n\\n\u4f7f\u7528\u89c4\u5219\u5f15\u64ce\u8f6c\u53d1\u8bbe\u5907\u6570\u636e\u7684\u65b9\u5f0f\u5e38\u7528\u6765\u89e3\u51b3\u7b2c\u4e00\u79cd\u95ee\u9898\u3002\\n\\n1. \u5728\u89c4\u5219\u5f15\u64ce\u4e2d\u65b0\u5efa\u4e00\u6761\u63a5\u5165\u89c4\u5219\\n2. \u62d6\u62fd\u4e00\u4e2a`mqtt in`\u8282\u70b9\uff0c\u586b\u5199\u8bbe\u5907\u4e3b\u9898\u63a5\u5165\u6570\u636e\\n3. \u518d\u62d6\u62fd\u4e00\u4e2a`mqtt out`\u8282\u70b9\uff0c\u4e0e`mqtt in`\u8282\u70b9\u8fde\u7ebf\\n4. \u5728`mqtt out`\u914d\u7f6e\u4e2d\u9700\u8981\u6dfb\u52a0\u65b0\u7684mqtt-broker\u8282\u70b9\uff0c\u6839\u636e\u5e73\u53f0mqtt\u7f51\u5173/\u8bbe\u5907\u63a5\u5165\u89c4\u5219\u586b\u5199\u4e3b\u9898\u548c\u8ba4\u8bc1\u65b9\u5f0f\uff08AccessToken\u63a5\u5165\u586b\u5199\u7528\u6237\u540d,MQTTBasic\u8ba4\u8bc1\u586b\u5199\u7528\u6237\u540d\u548c\u5bc6\u7801\uff09\\n5. \u5e73\u53f0\u5230\u8bbe\u5907\u7684\u901a\u4fe1\u53c2\u8003\u4ee5\u4e0a\u6b65\u9aa4\\n6. \u9664\u4e86\u4ee5\u4e0a\u8282\u70b9\uff0c\u5408\u7406\u4f7f\u7528\u5176\u4ed6\u529f\u80fd\u8282\u70b9\uff0c\u4e5f\u53ef\u4ee5\u8f6c\u6362\u62a5\u6587\u89c4\u8303\u5e76\u5bf9\u8bbe\u5907\u4f20\u8f93\u7684\u503c\u52a0\u5de5\u548c\u5904\u7406\\n\\n## \u4f7f\u7528\u7f16\u8f91\u53c2\u6570\u9875\u9762\u7684`\u6570\u636e\u5904\u7406\u811a\u672c`\u529f\u80fd\\n\\n\u6570\u636e\u5904\u7406\u811a\u672c\u529f\u80fd\u53ef\u89e3\u51b3\u7b2c\u4e8c\u79cd\u95ee\u9898\uff0c\u5b83\u7684\u539f\u7406\u76f8\u5f53\u4e8e\u4e2d\u95f4\u4ef6\u3002\\n\\n1. \u521b\u5efa\u8bbe\u5907\u540e\uff0c\u70b9\u51fb\u7f16\u8f91\u53c2\u6570\uff0c\u5728\u6570\u636e\u5904\u7406\u4e0b\u62c9\u6846\u9009\u62e9`\u81ea\u5b9a\u4e49\u534f\u8bae`\\n2. \u5728\u5f39\u51fa\u7684`\u81ea\u5b9a\u4e49\u6570\u636e\u89e3\u6790\u811a\u672c`\u5bf9\u8bdd\u6846\u4e2d\u8f93\u5165`\u4e0a\u884c\u89e3\u6790\u811a\u672c`\u548c`\u4e0b\u884c\u89e3\u6790\u811a\u672c`\\n3. \u4fdd\u5b58\u540e\u521b\u5efa\u5176\u4ed6\u540c\u7c7b\u8bbe\u5907\u7684\u65f6\u5019\u53ef\u4ee5\u76f4\u63a5\u9009\u62e9\u89e3\u6790\u811a\u672c\\n4. \u6570\u636e\u5904\u7406\u811a\u672c\u901a\u5e38\u8fd8\u53ef\u5bf9\u8bbe\u5907\u4f20\u8f93\u7684\u503c\u505a\u52a0\u5de5\u5904\u7406\\n5. \u5177\u4f53\u7ec6\u8282\u53ef\u4ee5\u53c2\u8003\u4e0b\u9762\u63d0\u4f9b\u7ed9\u7684\u89e3\u6790\u6848\u4f8b\\n\\n## \u6848\u4f8b\\n\\n\u7f51\u5173\u8bbe\u5907\u5e73\u53f0\u89c4\u8303\u62a5\u6587\uff1a\\n\\n```json\\n{\\n    \\"TH180001\\": {\\n        \\"temp\\": 26.5,\\n        \\"hum\\": 45.5\\n    },\\n    \\"TH180002\\": {\\n        \\"temp\\": 26.5,\\n        \\"hum\\": 45.5\\n    }\\n}\\n```\\n\\n\u975e\u89c4\u8303\u8bbe\u5907\u62a5\u6587\uff1a\\n```json\\n{\\n    \\"sensorDatas\\": {\\n        \\"TH180001\\": {\\n            \\"temp\\": 265,\\n            \\"hum\\": 455\\n        },\\n        \\"TH180002\\": {\\n            \\"temp\\": 265,\\n            \\"hum\\": 455\\n        }\\n    },\\n    \\"type\\": 2\\n}\\n```\\n\u4ee5\u4e0a\u884c\u89e3\u6790\u811a\u672c\u4e3a\u4f8b\uff1a\\n\\n1. \u5206\u6790\u53d1\u73b0\u8bbe\u5907\u53d1\u6765\u7684\u62a5\u6587\u591a\u4e86\u4e00\u5c42\u5d4c\u5957\uff0c\u5e76\u4e14\u6570\u503c\u90fd\u672a\u505a\u5904\u7406\\n2. \u521b\u5efa\u7f51\u5173\u8bbe\u5907\uff0c\u6dfb\u52a0\u4e24\u4e2a\u5b50\u8bbe\u5907\u3002\uff08\u6ce8\u610f\u5b50\u8bbe\u5907\u5730\u5740\u5728\u7f16\u8f91\u53c2\u6570\u4e2d\u586b\u5199\uff0c\u540c\u4e00\u7f51\u5173\u4e2d\u4e0d\u53ef\u91cd\u590d\uff0c\u5982\u4e0b\u56fe\uff09 ![](./images/compatible_device_02.png)\\n3. \u9996\u5148\u7f16\u5199\u4ee3\u7801\\n    ```javascript\\n    var device_msg = \'{\\"sensorDatas\\":{\\"TH180001\\":{\\"temp\\":265,\\"hum\\":455},\\"TH180002\\":{\\"temp\\":26.5,\\"hum\\":45.5}},\\"type\\":2}\'\\n    var public_topic = \\"gateway/attributes\\"\\n    var msg = encodeInp(device_msg,public_topic)\\n    console.log(msg)\\n    function encodeInp(msg, topic){\\n        // \u5c06\u8bbe\u5907\u81ea\u5b9a\u4e49msg\uff08\u81ea\u5b9a\u4e49\u5f62\u5f0f\uff09\u6570\u636e\u8f6c\u6362\u4e3ajson\u5f62\u5f0f\u6570\u636e, \u8bbe\u5907\u4e0a\u62a5\u6570\u636e\u5230\u7269\u8054\u7f51\u5e73\u53f0\u65f6\u8c03\u7528\\n    // \u5165\u53c2\uff1atopic string \u8bbe\u5907\u4e0a\u62a5\u6d88\u606f\u7684 topic\\n    // \u5165\u53c2\uff1amsg byte[] \u6570\u7ec4 \u4e0d\u80fd\u4e3a\u7a7a\\n    // \u51fa\u53c2\uff1astring\\n    // \u5904\u7406\u5b8c\u540e\u5c06\u5bf9\u8c61\u8f6c\u56de\u5b57\u7b26\u4e32\u5f62\u5f0f\\n    // \u4f8b\uff0cbyte[]\u8f6cstring\uff1avar msgString = String.fromCharCode.apply(null, msg);\\n    // \u4f8b\uff0cstring\u8f6cjsonObj\uff1amsgJson = JSON.parse(msgString);\\n    // \u4f8b\uff0cjsonObj\u8f6cstring\uff1amsgString = JSON.stringify(msgJson);\\n    var msgString = String.fromCharCode.apply(null, msg)\\n        if (topic === \\"gateway/attributes\\"){\\n            var jsonObj = JSON.parse(msgString);\\n            newObj = jsonObj.sensorDatas\\n            for(var key in newObj){\\n                for(var k in newObj[key]){\\n                    newObj[key][k] = newObj[key][k]/10\\n                }\\n            }\\n            msg = JSON.stringify(newObj);\\n        }\\n        return msg;\\n    }\\n    ```\\n4. \u4f7f\u7528\u5728\u7ebfjs\u8c03\u8bd5\u5de5\u5177,\u8fd9\u91cc\u7528\u7684\u662f\uff1ahttps://www.lddgo.net/code/runcode/javascript ![](./images/compatible_device_01.png)\\n5. \u8c03\u8bd5\u597d\u4ee5\u540e\uff0c\u5c06\u51fd\u6570\u7c98\u8d34\u8fdb\u811a\u672c\u4fdd\u5b58\uff08\u811a\u672c\u5728\u7f51\u5173\u7684\u7f16\u8f91\u53c2\u6570\u4e2d\uff0c\u5982\u56fe\uff09 ![](./images/compatible_device_03.png) ![](./images/compatible_device_04.png)\\n6. \u4e0b\u884c\u811a\u672c\u7684\u7f16\u5199\u4e5f\u540c\u4e0a"},{"id":"thingspanel-ver0.3.0-release","metadata":{"permalink":"/blog/thingspanel-ver0.3.0-release","editUrl":"https://github.com/ThingsPanel/thingspanel.github.io/tree/source/blog/2022-08-15-thingspanel-0.3.md","source":"@site/i18n/en/docusaurus-plugin-content-blog/2022-08-15-thingspanel-0.3.md","title":"ThingsPanel-0.3.0 was released, adding a rule engine, a permission system, and optimizing device access","description":"Release notes","date":"2022-08-15T00:00:00.000Z","formattedDate":"August 15, 2022","tags":[{"label":"ThingsPanel","permalink":"/blog/tags/things-panel"},{"label":"Rule engine","permalink":"/blog/tags/rule-engine"},{"label":"Permission system","permalink":"/blog/tags/permission-system"},{"label":"Performance testing","permalink":"/blog/tags/performance-testing"}],"readingTime":1.8,"hasTruncateMarker":false,"authors":[{"name":"zjhong","title":"Jiyi Technology","url":"https://github.com/zjhong","image_url":"https://avatars.githubusercontent.com/u/61645647?s=64&v=4","imageURL":"https://avatars.githubusercontent.com/u/61645647?s=64&v=4"}],"frontMatter":{"slug":"thingspanel-ver0.3.0-release","title":"ThingsPanel-0.3.0 was released, adding a rule engine, a permission system, and optimizing device access","authors":{"name":"zjhong","title":"Jiyi Technology","url":"https://github.com/zjhong","image_url":"https://avatars.githubusercontent.com/u/61645647?s=64&v=4","imageURL":"https://avatars.githubusercontent.com/u/61645647?s=64&v=4"},"tags":["ThingsPanel","Rule engine","Permission system","Performance testing"]},"unlisted":false,"prevItem":{"title":"ThingsPanel \u975e\u5b98\u65b9\u6807\u51c6MQTT\u534f\u8bae\u8bbe\u5907\u63a5\u5165","permalink":"/blog/script"},"nextItem":{"title":"ThingsPanel releases IoT mobile client (multi-image)","permalink":"/blog/thingspanel-app"}},"content":"## Release notes\\n\\nThis release revises many of the questions raised by previous users, especially the management of large-scale devices, access to complex devices, and how to efficiently forward data to third parties.In addition, this time it is also an overall test of performance, simulating 10,000 devices to stress test the system, and achieving a single TimescaleDB node 5000 devices/s access capability (4 cores 8G).In terms of permissions, horizontal fine to the operation and button, a relatively complete RBAC permission support has been established.Of course, it also includes a lot of detail improvements.\\n\\n## System demo\\n\\nDemo address\uff1ahttp://dev.thingspanel.cn\\n\\nAccount password\\n\\n- User name\uff1aadmin@thingspanel.cn\\n- Password\uff1a123456\\n\\n## What\'s new\\n- Added Redis as a caching module\\n- Added RBAC permission management module, using the Casbin permission framework, and the granularity of permissions is specific to devices, buttons or interfaces\\n\\n![](images/2022-08-15-11-25-27.png)\\n\\n- Added a role management page to support multiple roles.\\n\\n![](images/2022-08-15-11-28-22.png)\\n\\n- Added a permission management page, permissions fine-grained to the operation.\\n\\n![](images/2022-08-15-11-29-21.png)\\n\\n- The system backend adds support for Docker environment variables for easy configuration.\\n- Simplified deployment and increased adaptation to HUAWEI CLOUD / Alibaba Cloud.\\n- Added access rule engine and data forwarding function.\\n\\n![](images/2022-08-15-11-30-05.png)\\n\\n![](images/2022-08-15-11-30-15.png)\\n\\n- Rewritten Business - Device Grouping - Device Module, supporting unlimited device grouping\\n\\n![](images/2022-08-15-11-30-50.png)\\n\\n![](images/2022-08-15-11-30-59.png)\\n\\n- Added log of operation device, support query manual operation and automatic operation records\\n\\n![](images/2022-08-15-11-31-15.png)\\n\\n## Optimization and fixing\\n- Optimized first login loading speed.\\n- Optimized the overall UI.\\n- Optimized indexing and sorting of some tables to improve the fluency of operations.\\n- The standard of stress testing has been raised and various aspects of performance and structure have been optimized.\\n- Optimized automated alerting and control strategies.\\n- User added features and pages rewritten.\\n- Optimized the alarm information page.\\n\\n## The next release is scheduled\\n\\nThe next version, number 0.4.0, is functionally planned to learn from HomeAssistant, implement a more open structure, increase the group of shared chart components, and make the development of plug-ins simpler and more efficient plug-in development.The major structural issues that existed before ThingsPanel will be improved, especially on large integration projects, and the efficiency will be very prominent."},{"id":"thingspanel-app","metadata":{"permalink":"/blog/thingspanel-app","editUrl":"https://github.com/ThingsPanel/thingspanel.github.io/tree/source/blog/2022-07-22-thingspanel-app.md","source":"@site/i18n/en/docusaurus-plugin-content-blog/2022-07-22-thingspanel-app.md","title":"ThingsPanel releases IoT mobile client (multi-image)","description":"ThingsPanel is an underlying open source software of the Internet of Things, the main function is to collect device data, visualization, automation control, for many integrators, equipment vendors, solution providers to provide rapid product and delivery solutions.","date":"2022-07-22T00:00:00.000Z","formattedDate":"July 22, 2022","tags":[{"label":"ThingsPanel","permalink":"/blog/tags/things-panel"},{"label":"APP","permalink":"/blog/tags/app"}],"readingTime":0.905,"hasTruncateMarker":false,"authors":[{"name":"zjhong","title":"Jiyi Technology","url":"https://github.com/zjhong","image_url":"https://avatars.githubusercontent.com/u/61645647?s=64&v=4","imageURL":"https://avatars.githubusercontent.com/u/61645647?s=64&v=4"}],"frontMatter":{"slug":"thingspanel-app","title":"ThingsPanel releases IoT mobile client (multi-image)","authors":{"name":"zjhong","title":"Jiyi Technology","url":"https://github.com/zjhong","image_url":"https://avatars.githubusercontent.com/u/61645647?s=64&v=4","imageURL":"https://avatars.githubusercontent.com/u/61645647?s=64&v=4"},"tags":["ThingsPanel","APP"]},"unlisted":false,"prevItem":{"title":"ThingsPanel-0.3.0 was released, adding a rule engine, a permission system, and optimizing device access","permalink":"/blog/thingspanel-ver0.3.0-release"}},"content":"ThingsPanel is an underlying open source software of the Internet of Things, the main function is to collect device data, visualization, automation control, for many integrators, equipment vendors, solution providers to provide rapid product and delivery solutions.\\n\\nThingsPanel\'s mobile app is used to provide mobile management and control support to ThingsPanel.The main implemented functions include monitoring, control, policy, and device addition management.Is a lightweight client for ThingsPanel that supports SAAS scenarios.\\n\\n## Features on the mobile phone include\uff1a\\n\\n - Using Uniapp development, it can be easily compiled into iOS, Android, WeChat Mini Program and other Mini Programs, H5.\\n - You can scan the code to add a device (the device needs to be imported in the background first).\\n - View the monitoring values.\\n - \u5207\u6362\u667a\u80fd\u5316\u9879\u76ee\u548c\u8bbe\u5907\u5206\u7ec4\u3002\\n - Manual control.\\n - set the control policy,\\n - There are two types: device trigger and time condition trigger.\\n - Review the operation log.\\n - Personal account management function.\\n - Mobile phone verification code login.\\n\\nThingsPanel-APP mobile client login page ![ThingsPanel-APP landing page](/img/thingspanel-app-login.webp)\\n\\n\\nThingsPanel-APP Home ![ThingsPanel-APP](/img/thingspanel-app-home.webp)"}]}')}}]);